<link rel="import" href="../../vendor/polymer/polymer.html">
<link rel="import" href="../widgets/team-standings.html">
<link rel="import" href="../widgets/upcoming-events.html">
<link rel="import" href="../widgets/article-widget.html">
<link rel="import" href="../shared-behavior.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="page-styles.html">


<dom-module id="landing-page">
    <style include="shared-styles"></style>
    <style include="page-styles"></style>

    <template>
        <aside class="sidebar">
            <team-standings class="widget" data="{{data}}"></team-standings>
            <upcoming-events class="widget" data="{{data}}"></upcoming-events>
        </aside>

        <main class="main">
            <template is="dom-repeat" items="[[articles]]" as="article">
                <article-widget class="widget" heading="[[article.title]]" image="[[article.image]]" body="[[article.body]]"></article-widget>
            </template>
        </main>
    </template>
</dom-module>


<script>
    Polymer({
        is: 'landing-page',

        behaviors: [
            Intrams.SharedBehavior
        ],

        properties: {
            articles: {
                type: Array,
                computed: 'computeArticles(data.articles)'
            }
        },

        computeArticles: function(articles) {
            var self = this;
            return articles.sort(function(a, b) {
                a = self._parseDate(a.date);
                b = self._parseDate(b.date);
                return b - a; // latest date first
            });
        }
    });
</script>
